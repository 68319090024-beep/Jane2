<script>
        const firebaseConfig = {
            apiKey: "AIzaSyAlPqcIYDYfRBYwnOKJ4n4KzNLvEEl5x64", 
            databaseURL: "https://kun16-95305-default-rtdb.firebaseio.com",
            projectId: "kun16-95305"
        };

        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        db.ref("Monitor").on("value", (snapshot) => {
            const data = snapshot.val();
            if(!data) return;

            document.getElementById("temp").innerText = (data.temp || 0).toFixed(1) + " °C";

            /* === ส่วนที่แก้ไข: การแสดงผลแสง === */
            const lightEl = document.getElementById("light");
            const iconLight = document.getElementById("icon-light");
            
            // อ่านค่า (0 หรือ 1)
            let val = data.light_value; 

            // ตรรกะใหม่: ถ้าค่าเป็น 0 คือ สว่าง, ถ้าเป็น 1 คือ มืด
            if (val == 0) { 
                lightEl.innerText = "สว่าง";
                lightEl.className = "val bright-text"; // สีเหลือง
                iconLight.className = "fas fa-sun bright-text";
            } else {
                lightEl.innerText = "มืด / ปกติ";
                lightEl.className = "val dark-text";   // สีเทา
                iconLight.className = "fas fa-moon dark-text";
            }
            /* ================================= */

            const vibeEl = document.getElementById("vibe");
            if (data.vibrate == true) {
                vibeEl.innerText = "แผ่นดินไหว!";
                vibeEl.className = "val alert-text";
            } else {
                vibeEl.innerText = "ปกติ";
                vibeEl.className = "val";
            }

            // จัดการสถานะแจ้งเตือนหลัก
            const badge = document.getElementById("statusBadge"); // ถ้ามี ID นี้
            const card = document.querySelector(".status-card"); // หรือใช้ class

            // ถ้า Alert เป็น true ให้แสดงสีแดง
            if (data.alert == true) {
               // ใส่โค้ดเปลี่ยนสีการ์ดถ้าต้องการ
            }
        });

        function resetSystem() {
            // กดปุ่มแล้วส่งค่า false ไปหยุด Arduino
            db.ref("Monitor").update({ alert: false, vibrate: false });
        }
    </script>
